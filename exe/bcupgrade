#!/usr/bin/env ruby

require 'bcupgrade'
require 'optparse'
require 'readline'

OptionParser.new do |opt|
  begin
    opt.on('-v', '--version', 'Show version number') do
      puts Bcupgrade::VERSION
      exit
    end
    opt.on('--dry-run', 'Show output without running') do
      opt.parse!(ARGV)
      Bcupgrade.run
      exit
    end

    opt.parse!(ARGV)
    Bcupgrade.run(true)
  rescue => e
    puts e.to_s
  end
end
